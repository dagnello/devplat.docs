<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" ><topic xml:lang="en-us" id="topic50538">
<title>HPE Helion Public Cloud Load Balancer Service API</title>
<prolog>
<metadata>
<othermeta name="layout" content="default"/>
</metadata>
</prolog>
<body>
<p>
<!--PUBLISHED-->
 <!--./content/api/c1.1/lbaas-api.md-->
 <!--permalink: /publiccloud/api/lbaas/--></p>
<p>
<b>Date:</b> March 2015</p>
<p>
<b>Document Version:</b> 1.2</p>
<section id="1-overview"> <title>1. Overview</title>
<p>This guide is intended for software developers who wish to create applications using the HPE Helion Public Cloud Load Balancer as a Service (LBaaS) set of APIs. It assumes the reader has a general understanding of cloud APIs, load balancing concepts, RESTful web services, HTTP/1.1 conventions and JSON serialization formats. The LBaaS set of APIs utilize and take advantage of a variety of Openstack cloud API patterns which are described in detail.</p>
<p>We will be referring to HPE Helion Public Cloud Load Balancer in this document as simply Load Balancer.</p>
</section>
<section id="11-api-maturity-level"> <title>1.1 API Maturity Level</title>
<p>This API definition represents the Load Balancer as a Service (LBaaS) in Beta release form.</p>
<p>
<b>Maturity Level</b>: <i>Exploratory</i> (Load Balancer service is currently in Private Beta)</p>
<p>
  <b>Service activation required, please refer to the LBaaS service information on hpcloud.com for instructions on how to request activation for your account.</b>
</p>
<p>
<b>Version API Status</b>: <i>BETA</i>
</p>
</section>
<section id="12-document-revision-history"> <title>1.2 Document Revision History</title>
<table>
<tgroup cols="3">
<colspec colname="col1"/>
<colspec colname="col2"/>
<colspec colname="col3"/>
<thead>
<row>
<entry align="left">Document Version</entry>
  <entry align="left">Date</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">1.0</entry>
  <entry align="left">April 2014</entry>
  <entry align="left">Initial entry</entry>
</row>
<row>
<entry align="left">1.1</entry>
  <entry align="left">May 2014</entry>
  <entry align="left">HPE Helion updates</entry>
</row>
<row>
<entry align="left">1.2</entry>
  <entry align="left">March 2015</entry>
  <entry align="left">Updates for new Netscaler offering</entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="2-architecture-view"> <title>2. Architecture View</title>
</section>
<section id="21-overview"> <title>2.1 Overview</title>
<p>The Load Balancer as a Service (LBaaS) is a set of APIs that provide a RESTful interface for the creation and management of load balancers in the cloud. Currently only application servers hosted in the HPE Helion Public Cloud are supported. The LBaaS APIs defined are integrated within the HPE Helion API ecosystem including integration with the Identity management system, billing and monitoring systems.</p>
</section>
<section id="22-conceptuallogical-architecture-view"> <title>2.2 Conceptual/Logical Architecture View</title>
<p>To use the Load Balancers API effectively, you should understand several key concepts.</p>
</section>
<section id="221-load-balancer"> <title>2.2.1 Load Balancer</title>
<p>A load balancer is a logical device. It is used to distribute workloads between multiple back-end systems or services called 'nodes', based on the criteria defined as part of its configuration.</p>
</section>
<section id="222-virtual-ip-address"> <title>2.2.2 Virtual IP Address</title>
<p>A virtual IP address is an Internet Protocol (IP) address configured on the load balancer for use by clients connecting to a service that is load balanced. Incoming connections and requests are distributed to back-end nodes based on the configuration of the load balancer.  The load balancer Virtual IP address will need to be registered with the appropriate DNS domain record in order for users to access the nodes via a domain name-based URL.</p>
</section>
<section id="223-node"> <title>2.2.3 Node</title>
<p>A node is a back-end device providing a service, like a web or file server, on a specified IP and port.</p>
<p>The nodes defined by the load balancer are responsible for servicing the requests received through the load balancers virtual IP. By default, the load balancer employs a basic health check that ensures the node is listening on its defined port. The node is checked at the time of addition and at regular intervals as defined by the load balancer health check configuration. If a back-end node is not listening on its port or does not meet the conditions of the defined active health check for the load balancer, then the load balancer will not forward connections or requests to it and its status will be listed as OFFLINE. Only nodes that are in an ONLINE status will receive and be able to service traffic from the load balancer.</p>
<p>The IP address of a node is restricted to the IP address range of Compute instances.  An attempt to use a node outside this range will result in a 400 error in an API call.</p>
</section>
<section id="224-health-monitor"> <title>2.2.4 Health Monitor</title>
<p>A health monitor is a configurable, active monitoring operation that exists for all load balancer nodes. In addition to the basic health checks, active health monitoring operations periodically check your back-end nodes to ensure they are responding correctly.</p>
<p>Active health monitoring offers two choices for the type of monitor it can provide:</p>
<ul>
<li>
<p>CONNECT monitoring is the most basic type of health check and it does not perform post-processing or protocol specific health checks.</p>
</li>
<li>
<p>HTTP monitoring, on the other hand, is more intelligent and it is capable of processing HTTP responses to determine the condition of a node. 
For both options, a user may configure the time delay between monitoring checks, the timeout period for a connection to a node, the number of attempts before removing a node from rotation and for HTTP monitoring, the HTTP path to test.</p>
</li>
</ul>
<p>Active health monitoring, by default is configured to use CONNECT type monitoring with a 30 second delay, 30 second timeout, and 2 retries, and it cannot be disabled. The caller may configure one health monitor per load balancer and the same configuration is used to monitor all of the back-end nodes.</p>
</section>
<section id="23-infrastructure-architecture-view"> <title>2.3 Infrastructure Architecture View</title>
<p>LBaaS fits into the HPE Helion ecosystem of APIs by utilizing the same common authentication mechanisms as other HPE Helion services. In order to use LBaaS, a user account must have activated "Load Balancer" service. All API calls require a valid HPE Helion authentication token.</p>
</section>
<section id="3-account-level-view"> <title>3. Account-level View</title>
<p>Once the account is activated, the LBaaS service will show up in the service catalog returned during user login. In addition, LBaaS endpoints to be used will also be presented. Availability zone information may vary based on region.</p>
</section>
<section id="31-service-catalog"> <title>3.1 Service Catalog</title>
<p>Once a user authenticates using the RESTful API, a service catalog will list the availability of the LBaaS service, roles and endpoints for the region you have logged into and in which you are activated for.</p>
<p>
  <i>The following is an example of LBaaS service information within the service catalog including roles and endpoints:</i>
</p>
<codeblock>
  <codeph>"serviceCatalog": [
    {
        region_id: "region-a.geo-1.private-beta"
        links: {
        self: "https://region-b.geo-1.identity.hpcloudsvc.com:35357/v3/endpoints/2201_P"
    }
        url: "https://region-a.geo-1.ns-load-balancer.hpcloudsvc.com/v1.1"
        region: "region-a.geo-1.private-beta"
        interface: "public"
        service_Id: "220"
        id: "2201_P"
    }
    {
        region_id: "region-b.geo-1.private-beta"
        links: {
        self: "https://region-b.geo-1.identity.hpcloudsvc.com:35357/v3/endpoints/2204_P"
    }
        url: "https://region-b.geo-1.ns-load-balancer.hpcloudsvc.com/v1.1"
        region: "region-b.geo-1.private-beta"
        interface: "public"
        service_Id: "220"
        id: "2204_P"
    }
    ]
</codeph>
</codeblock>
</section>
<section id="4-general-api-information"> <title>4. General API Information</title>
<p>This section describes operations and guidelines that are common to all LBaaS APIs.</p>
</section>
<section id="41-authentication"> <title>4.1 Authentication</title>
<p>The LBaaS API uses standard defined by <tm tmtype="reg">OpenStack</tm> Keystone project and used by the HPE Helion for authentication. Please refer to the Identity service for more details on all authentication methods currently supported.</p>
</section>
<section id="42-service-accessendpoints"> <title>4.2 Service Access/Endpoints</title>
<p>As shown in the example above, logging into your region will provide you with the appropriate LBaaS endpoints to use. In addition, all supported versions are published within the service catalog. A client may choose to use any LBaaS API version listed.</p>
</section>
<section id="43-requestresponse-types"> <title>4.3 Request/Response Types</title>
<p>The LBaaS API currently only supports JSON data serialization formats for request and response bodies. The request format is specified using the 'Content-Type' header and is required for operations that have a request body. The response format should be specified in requests using the 'Accept' header. If no response format is specified, JSON is the default.</p>
</section>
<section id="44-persistent-connections"> <title>4.4 Persistent Connections</title>
<p>By default, the API supports persistent connections via HTTP/1.1 keep-alives. All connections will be kept alive unless the connection header is set to close. In adherence with the IETF HTTP RFCs, the server may close the connection at any time and clients should not rely on this behavior.</p>
</section>
<section id="45-absolute-limits"> <title>4.5 Absolute Limits</title>
<p>Absolute limits are limits which prohibit a user from creating too many LBaaS resources. For example, 'maxNodesPerLoadbalancer' identifies the total number of nodes that may be associated with a given load balancer. Limits for a specific tenant may be queried for using the 'GET /limits' API. This will return the limit values which apply to the tenant who made the request.</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">Limited Resource</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">maxLoadBalancers</entry>
  <entry align="left">Maximum number of load balancers allowed for this tenant</entry>
</row>
<row>
<entry align="left">maxNodesPerLoadBalancer</entry>
  <entry align="left">Maximum number of nodes allowed for each load balancer</entry>
</row>
<row>
<entry align="left">maxLoadBalancerNameLength</entry>
  <entry align="left">Maximum length allowed for a load balancer name</entry>
</row>
<row>
<entry align="left">maxVIPsPerLoadBalancer</entry>
  <entry align="left">Maximum number of Virtual IPs for each load balancer</entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="46-faults"> <title>4.6 Faults</title>
<p>When issuing a LBaaS API request, it is possible that an error can occur. In these cases, the system will return an HTTP error response code denoting the type of error and a LBaaS response body with additional details regarding the error. Specific HTTP status codes possible are listed in each API definition.</p>
<p>
  <i>The following JSON message represents the JSON response body used for all faults:</i>
</p>
<codeblock>
  <codeph>{
   "message":"Description of fault",
   "details":"Details of fault",
   "code": HTTP standard error status
}
</codeph>
</codeblock>
</section>
<section id="47-specifying-projecttenant-ids"> <title>4.7 Specifying Project/Tenant IDs</title>
<p>Project/Tenant identifiers with LBaaS API URIs are not required. The project/tenant identifier is derived from the Openstack Keystone authentication token provided with each API call. This simplifies the REST URIs to only include the base URI and the resource. The project/tenant identifier is derived from the authentication token which is provided with the API call. All LBaaS calls behave in this manner.</p>
</section>
<section id="48-https-support"> <title>4.8 HTTPS Support</title>
<p>End-to-end HTTPS protocol support is currently provided by the TCP load balancer option. HTTPS-based traffic will flow between end-users and application server nodes via the TCP load balancer connection.</p>
<p>What is <i>required</i> to support HTTPS via a TCP load balancer:</p>
<ul>
<li>The same SSL certificate needs to be installed on each application server node.</li>
<li>The same private key needs to be installed on each application server node.</li>
<li>The SSL certificate needs to reference the load balancer either via the registered domain name or via the Virtual IP address of the load balancer.</li>
</ul>
<p>What is currently <b>
<i>not</i>
</b> supported:</p>
<ul>
<li>SSL certificate termination on the load balancer</li>
<li>HTTPS/SSL session affinity or "stickyness"</li>
</ul>
</section>
<section id="49-load-balancer-default-settings"> <title>4.9 Load Balancer Default Settings</title>
<p>The following are the non-configurable, default load balancer settings.</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">Setting</entry>
  <entry align="left">Value</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">TCP</entry>
  <entry align="left">Ports 443, 8443 are supported.</entry>
</row>
<row>
<entry align="left">HTTP</entry>
  <entry align="left">Ports 80, 8080, 8088 are supported.</entry>
</row>
<row>
<entry align="left">TCP Sessions</entry>
  <entry align="left">Source-IP Affinity turned ON by default. No current option to turn this function OFF.</entry>
</row>
<row>
<entry align="left">HTTP Sessions</entry>
  <entry align="left">Session Persistence is turned ON by default. The session persistent cookie name is SERVERID and the contents will be "id-xxxxx" where the x value will be the load balancer node ID.  No current option to turn this function OFF or edit the default HTTP cookie for this function.</entry>
</row>
<row>
<entry align="left">HTTP X-Forwarded-For (XFF)</entry>
  <entry align="left">On by default</entry>
</row>
<row>
<entry align="left">Assignable IP Addresses</entry>
  <entry align="left">Only Compute service IP range; no support for external IP addresses for nodes.</entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="5-rest-api-specifications"> <title>5. REST API Specifications</title>
<p>The following is a summary of all supported LBaaS API resources and methods. Each resource and method is defined in detail in the subsequent sections.</p>
<p>
<b>Host</b>:<!--A BR tag was used here in the original source.-->
US West - https://region-a.geo-1.ns-load-balancer.hpcloudsvc.com<!--A BR tag was used here in the original source.-->
US East - https://region-b.geo-1.ns-load-balancer.hpcloudsvc.com</p>
<p>
<b>BaseURI</b>: {Host}</p>
<p>
  <b>Derived resource identifiers:</b>
</p>
<p>
<b>{loadbalancerId}</b> is the unique identifier for a load balancer returned by the LBaaS service.</p>
<p>
<b>{nodeId}</b> is the unique identifier for a load balancer node returned by the LBaaS service.</p>
</section>
<section id="51-service-api-operations"> <title>5.1 Service API Operations</title>
</section>
<section id="511-lbaas-api-summary-table"> <title>5.1.1 LBaaS API Summary Table</title>
<table>
<tgroup cols="4">
<colspec colname="col1"/>
<colspec colname="col2"/>
<colspec colname="col3"/>
<colspec colname="col4"/>
<thead>
<row>
<entry align="left">Resource</entry>
  <entry align="left">Operation</entry>
  <entry align="left">Method</entry>
  <entry align="left">Path</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">Versions</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-version">Get specific API version</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/</entry>
</row>
<row>
<entry align="left">Limits</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-limits">Get list of LBaaS limits</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/limits</entry>
</row>
<row>
<entry align="left">Protocols</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-protocols">Get list of supported protocols</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/protocols</entry>
</row>
<row>
<entry align="left">Algorithms</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-algorithms">Get list of supported algorithms</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/algorithms</entry>
</row>
<row>
<entry align="left">Load Balancer</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-list">Get list of all load balancers</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers</entry>
</row>
<row>
<entry align="left">Load Balancer</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-status">Get load balancer details</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}</entry>
</row>
<row>
<entry align="left">Load Balancer</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-create">Create a new load balancer</xref>
</entry>
  <entry align="left">POST</entry>
  <entry align="left">/v1.1/loadbalancers</entry>
</row>
<row>
<entry align="left">Load Balancer</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-modify">Update load balancer attributes</xref>
</entry>
  <entry align="left">PUT</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}</entry>
</row>
<row>
<entry align="left">Load Balancer</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-delete">Delete an existing load balancer</xref>
</entry>
  <entry align="left">DELETE</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}</entry>
</row>
<row>
<entry align="left">Node</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-node-list">Get list of load balancer nodes</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/nodes</entry>
</row>
<row>
<entry align="left">Node</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-node-status">Get a specific load balancer node</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</entry>
</row>
<row>
<entry align="left">Node</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-node-create">Create a new load balancer node</xref>
</entry>
  <entry align="left">POST</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/nodes</entry>
</row>
<row>
<entry align="left">Node</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-node-modify">Update a load balancer node</xref>
</entry>
  <entry align="left">PUT</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</entry>
</row>
<row>
<entry align="left">Node</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-node-delete">Delete a load balancer node</xref>
</entry>
  <entry align="left">DELETE</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</entry>
</row>
<row>
<entry align="left">Virtual IP</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-vips">Get list of virtual IPs</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/virtualips</entry>
</row>
<row>
<entry align="left">Health Monitor</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-monitor-status">Get a load balancer monitor</xref>
</entry>
  <entry align="left">GET</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/healthmonitor</entry>
</row>
<row>
<entry align="left">Health Monitor</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-monitor-modify">Update a load balancer monitor</xref>
</entry>
  <entry align="left">PUT</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/healthmonitor</entry>
</row>
<row>
<entry align="left">Health Monitor</entry>
  <entry align="left">
<xref type="section" href="#topic50538/api-monitor-delete">Reset a load balancer monitor</xref>
</entry>
  <entry align="left">DELETE</entry>
  <entry align="left">/v1.1/loadbalancers/{loadbalancerId}/healthmonitor</entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section id="512-common-request-headers"> <title>5.1.2 Common Request Headers</title>
<p>
  <i>HTTP standard request headers</i>
</p>
<p>
<b>Accept</b> - Internet media types that are acceptable in the response. LBaaS API supports the media type 'application/json'.</p>
<p>
<b>Content-Length</b> - The length of the request body in octets (8-bit bytes).</p>
<p>
<b>Content-Type</b> - The Internet media type of the request body. Used with POST and PUT requests. LBaaS API supports 'application/json'.</p>
<p>
  <i>Non-standard request headers</i>
</p>
<p>
<b>X-Auth-Token</b> - Identity service authorization token.</p>
<p>
  <i>Example</i>
</p>
<codeblock>
  <codeph>GET /v1.0/loadbalancers HTTP/1.1
Host: system.hpcloudsvc.com
Content-Type: application/json
Accept: application/json
X-Auth-Token: HPAuth_2895c13b1118e23d977f6a21aa176fd2bd8a10e04b74bd8e353216072968832a
Content-Length: 85
</codeph>
</codeblock>
</section>
<section id="513-common-response-headers"> <title>5.1.3 Common Response Headers</title>
<p>
  <i>HTTP standard response headers</i>
</p>
<p>
<b>Content-Type</b> - Internet media type of the response body.</p>
<p>
<b>Date</b> - The date and time that the response was sent.</p>
<p>
  <i>Example</i>
</p>
<codeblock>
  <codeph>HTTP/1.1 200 OK
Content-Length: 1135
Content-Type: application/json; charset=UTF-8
Date: Tue, 30 Oct 2012 16:22:35 GMT
</codeph>
</codeblock>
</section>
<section id="52-versions"> <title>5.2 Versions</title>
</section>
<section id="api-version"> <title>5.2.1 Get Specific LBaaS API Version Information</title>
</section>
<section id="get-v11"> <title>GET /v1.1/</title>
<p>
  <b>Description</b>
</p>
<p>This method allows querying the LBaaS service for information regarding a specific version of the LBaaS API. This method is also advertised within the Keystone service catalog which is presented upon user login.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains information regarding a specific LBaaS API version.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"versions": [
    {
        "status": "CURRENT",
        "updated": "2012-12-18T18:30:02.25Z",
        "id": "v1.1",
        "links": [
            {
                "href": "http://wiki.openstack.org/Atlas-LB",
                "rel": "self"
            }
        ]
    }
]
}
</codeph>
</codeblock>
</section>
<section id="53-limits"> <title>5.3 Limits</title>
</section>
<section id="api-limits"> <title>5.3.1 Get List of LBaaS API Limits</title>
</section>
<section id="get-v11limits"> <title>GET /v1.1/limits</title>
<p>
  <b>Description</b>
</p>
<p>This method allows querying the LBaaS service for a list of API limits which apply on a tenant basis. Each tenant may not utilize LBaaS API resources exceeding these limits and will receive and over limit error if attempted (413).</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">Returned Limit Name</entry>
  <entry align="left">Value</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">maxLoadBalancers</entry>
  <entry align="left">Maximum number of load balancers allowed for this tenant</entry>
</row>
<row>
<entry align="left">maxNodesPerLoadBalancer</entry>
  <entry align="left">Maximum number of nodes allowed for each load balancer</entry>
</row>
<row>
<entry align="left">maxLoadBalancerNameLength</entry>
  <entry align="left">Maximum length allowed for a load balancer name</entry>
</row>
<row>
<entry align="left">maxVIPsPerLoadBalancer</entry>
  <entry align="left">Maximum number of Virtual IPs for each load balancer</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains information regarding limits imposed for the tenant making the request.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/limits
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"limits": {
        "absolute": {
                "values": {
                    "maxLoadBalancerNameLength": 128, 
                    "maxLoadBalancers": 20, 
                    "maxNodesPerLoadBalancer": 5, 
                    "maxVIPsPerLoadBalancer": 1
                    }
            }
        }
}
</codeph>
</codeblock>
</section>
<section id="54-protocols"> <title>5.4 Protocols</title>
</section>
<section id="api-protocols"> <title>5.4.1 Get List of Supported LBaaS Protocols</title>
</section>
<section id="get-v11protocols"> <title>GET /v1.1/protocols</title>
<p>
  <b>Description</b>
</p>
<p>All load balancers must be configured with the protocol of the service which is being load balanced. The protocol selection should be based on the protocol of the back-end nodes. The current specification supports HTTP (port 80/8080) and TCP (port 443/8443) services.  HTTPS traffic is supported currently via the TCP connection.  Support for SSL termination on the load balancer is not currently supported.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the currently supported protocols and port numbers.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/protocols
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"protocols": [
    {
        "name": "HTTP",
        "port": 80
    },
    {
        "name": "HTTP",
        "port": 8080
    },
    {
        "name": "HTTP",
        "port": 8088
    },
    {
        "name": "TCP",
        "port": 443
    },
    {
        "name": "TCP",
        "port": 8443
    },
    {
        "name": "GALERA",
        "port": 3306
    }
]
}
</codeph>
</codeblock>
</section>
<section id="55-algorithms"> <title>5.5 Algorithms</title>
</section>
<section id="api-algorithms"> <title>5.5.1 Get List Of Supported LBaaS Algorithms</title>
</section>
<section id="get-v11algorithms"> <title>GET /v1.1/algorithms</title>
<p>
  <b>Description</b>
</p>
<p>All load balancers utilize an algorithm that defines how traffic should be directed between back end nodes. The default algorithm for newly created load balancers is ROUND_ROBIN, which can be overridden at creation time or changed after the load balancer has been initially provisioned.</p>
<p>The algorithm name is to be constant within a major revision of the load balancing API, though new algorithms may be created with a unique algorithm name within a given major revision of this API.</p>
<p>
  <b>Supported Algorithms</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">Name</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">LEAST_CONNECTIONS</entry>
  <entry align="left">The node with the lowest number of connections will receive requests.</entry>
</row>
<row>
<entry align="left">ROUND_ROBIN</entry>
  <entry align="left">Connections are routed to each of the back-end servers in turn.</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the currently supported algorithms.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/algorithms
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"algorithms": [
    {
        "name": "ROUND_ROBIN"
    },
    {
        "name": "LEAST_CONNECTIONS"
    }
]
}
</codeph>
</codeblock>
</section>
<section id="56-load-balancers"> <title>5.6 Load Balancers</title>
</section>
<section id="api-list"> <title>5.6.1 Get List Of All Load Balancers</title>
</section>
<section id="get-v11loadbalancers"> <title>GET /v1.1/loadbalancers</title>
<p>
  <b>Description</b>
</p>
<p>This operation provides a list of all load balancers configured and associated with your account. This includes a summary of attributes for each load balancer. In order to retrieve all the details for a load balancer, an individual request for the load balancer must be made.</p>
<p>This operation returns the following attributes for each load balancer:</p>
<p>
<i>id :</i> Unique identifier for the load balancer</p>
<p>
<i>name :</i>  Creator assigned name for the load balancer</p>
<p>
<i>algorithm :</i> Creator specified algorithm for the load balancer</p>
<p>
<i>protocol :</i> Creator specified protocol for the load balancer</p>
<p>
<i>port :</i> Creator specified port for the load balancer</p>
<p>
<i>status :</i> Current status, see section on load balancer status within load balancer create</p>
<p>
<i>created :</i> When the load balancer was created</p>
<p>
<i>updated :</i> When the load balancer was last updated</p>
<p>
<i>nodeCount :</i> The number of backend servers attached to this load balancer</p>
<p>
<i>options :</i> Current options are timeout (30 sec) and retries (3) for each load balancer</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>
<i>status :</i> When status=DELETED provided a list of load balancers deleted in the last week will be provided</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains a list of load balancers for the tenant making the request.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"loadBalancers":[
        {
            "name":"lb-site1",
            "id":"71",
            "protocol":"HTTP",
            "port":80,
            "algorithm":"LEAST_CONNECTIONS",
            "status":"ACTIVE",
            "created":"2010-11-30T03:23:42Z",
            "updated":"5.18510-11-30T03:23:44Z",
            "nodeCount":2,
            "options": {"timeout": 30000, "retries": 3}
        },
        {
            "name":"lb-site2",
            "id":"166",
            "protocol":"TCP",
            "port":443,
            "algorithm":"ROUND_ROBIN",
            "status":"ACTIVE",
            "created":"2010-11-30T03:23:42Z",
            "updated":"2010-11-30T03:23:44Z",
            "nodeCount":2,
            "options": {"timeout": 30000, "retries": 3}
        }
        ]
}
</codeph>
</codeblock>
</section>
<section id="api-status"> <title>5.6.2 Get Load Balancer Details</title>
</section>
<section id="get-v11loadbalancersloadbalancerid"> <title>GET /v1.1/loadbalancers/{loadbalancerID}</title>
<p>
  <b>Description</b>
</p>
<p>This operation provides detailed description for a specific load balancer configured and associated with your account. This operation is not capable of returning details for a load balancer which has been deleted. Details include load balancer virtual IP and node information.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer requested or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerID}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
        "id": "2000",
        "name":"sample-loadbalancer",
        "protocol":"HTTP",
        "port": 80,
        "algorithm":"ROUND_ROBIN",
        "status":"ACTIVE",
        "statusDescription":"",
        "created":"2010-11-30T03:23:42Z",
        "updated":"2010-11-30T03:23:44Z",
        "nodeCount":2,
        "options": {"timeout": 30000, "retries": 3},
        "virtualIps":[
                    {
                        "id": 1000,
                        "address":"15.186.1.1",
                        "type":"PUBLIC",
                        "ipVersion":"IPV4"
                    }
             ],
        "nodes":     [
                  {
                        "id": "1041",
                        "address":"15.185.1.1",
                        "port": 80,
                        "condition":"ENABLED",
                        "status":"ONLINE"
                   },
                   {
                        "id": "1411",
                        "address":"15.185.1.2",
                        "port": 80,
                        "condition":"ENABLED",
                        "status":"ONLINE"
                   }
              ],
}
</codeph>
</codeblock>
</section>
<section id="api-create"> <title>5.6.3 Create a New Load Balancer</title>
</section>
<section id="post-v11loadbalancers"> <title>POST /v1.1/loadbalancers</title>
<p>
  <b>Description</b>
</p>
<p>This operation provisions a new load balancer based on the configuration defined in the request object. Once the request is validated and progress has started on the provisioning process, a response object will be returned. The object will contain a unique identifier and status of the request.</p>
<p>If the status returned is set to 'BUILD', then using the identifier of the load balancer, the caller can check on the progress of the creation operation by performing a GET on loadbalancers/{loadbalancerId}. When the status of the load balancer returned changes to 'ACTIVE', then the load balancer has been successfully provisioned and is now operational.</p>
<p>
  <b>Load Balancer Status Values</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">Status Name</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">BUILD</entry>
  <entry align="left">Load balancer is in a building state and not yet operational</entry>
</row>
<row>
<entry align="left">ACTIVE</entry>
  <entry align="left">Load balancer is in an operational state</entry>
</row>
<row>
<entry align="left">PENDING_UPDATE</entry>
  <entry align="left">Load balancer is in the process of an update</entry>
</row>
<row>
<entry align="left">ERROR</entry>
  <entry align="left">Load balancer is in an error state and not operational</entry>
</row>
</tbody>
</tgroup>
</table>
<p>The caller of this operation must specify at least the following attributes of the load balancer:</p>
<ul>
<li>name</li>
<li>at least one node</li>
</ul>
<p>If the request cannot be fulfilled due to insufficient or invalid data, an HTTP 400 (Bad Request) error response will be returned with information regarding the nature of the failure in the body of the response. Failures in the validation process are non-recoverable and require the caller to correct the cause of the failure and POST the request again.</p>
<p>By default, the system will create a load balancer with protocol set to HTTP, port set to 80 (or 443 if protocol is TCP), and assign a public IPV4 address to the load balancer. The default algorithm used is set to ROUND_ROBIN.</p>
<p>The load balancer options consist of a 30 second timeout for client connections (30,000ms) and 3 retries. Valid timeout values range from 0 to 1000 seconds (1,000,000 ms) with 0 indicating no timeout. retries can range from 0 to 100.</p>
<p>A load balancer name has a max length that can be queried when querying limits.</p>
<p>Users may configure all documented features of the load balancer at creation time by simply providing the additional elements or attributes in the request. This document provides an overview of all the features the load balancing service supports.</p>
<p>If you have at least one load balancer, you may create subsequent load balancers that share a single virtual IP by issuing a POST and supplying a virtual IP ID instead of a type. Additionally, this feature is highly desirable if you wish to load balance both an unsecured and secure protocol using one IP address. For example, this method makes it possible to use the same load balancing configuration to support an HTTP and a TCP load balancer. Load balancers sharing a virtual IP must utilize a unique port.</p>
<p>
  <b>Request Data</b>
</p>
<p>The caller is required to provide a request data with the POST which includes the appropriate information to create a new load balancer.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<ul>
<li>X-Auth-Token   </li>
<li>Accept: application/json   </li>
<li>Content-Type: application/json</li>
</ul>
<p>
  <b>Request Body</b>
</p>
<p>The request body must follow the correct format for new load balancer creation, examples....</p>
<p>
  <b>Request body example to create a load balancer with two nodes</b>
</p>
<codeblock>
  <codeph>{
        "name": "a-new-loadbalancer",
        "nodes":      [
                    {
                        "address": "15.185.1.1",
                        "port": 80
                    },
                    {
                        "address": "15.185.1.2",
                        "port": 81
                    }
            ]
} 
</codeph>
</codeblock>
<p>
  <b>Request body example to create a load balancer using existing load balancer virtual IP</b>
</p>
<codeblock>
  <codeph>{
"name":"a-new-loadbalancer",
    "port":80,
    "protocol":"HTTP",
    "options": {"timeout": 30000, "retries": 3},
    "virtualIps": [
               {
                  "id":39
               }
             ],
    "nodes":      [
               {
                  "address":"15.185.1.1",
                  "port":80,
                  "condition":"ENABLED"
               }
             ]
}
</codeph>
</codeblock>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer requested or appropriate error.</p>
<p>
  <b>Create Load Balancer (Required Attributes with Shared IP) Response: JSON</b>
</p>
<codeblock>
  <codeph>{
        "name": "a-new-loadbalancer",
        "id": "144",
        "protocol": "HTTP",
        "port": 83,
        "algorithm": "ROUND_ROBIN",
        "status": "BUILD",
        "created": "2011-04-13T14:18:07Z",
        "updated":"2011-04-13T14:18:07Z",
        "options": {"timeout": 30000, "retries": 3},
        "virtualIps": [
                {
                    "address": "3ffe:1900:4545:3:200:f8ff:fe21:67cf",
                    "id": 39,
                    "type": "PUBLIC",
                    "ipVersion": "IPV6"
                }
              ],
        "nodes":      [
                {
                    "address": "15.185.1.1",
                    "id": "653",
                    "port": 80,
                    "status": "ONLINE",
                    "condition": "ENABLED"
                }
              ]
}
</codeph>
</codeblock>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">413</entry>
  <entry align="left">Over Limit</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Example</b>
</p>
<p>
  <b>Contents of Request file lb.json</b>
</p>
<codeblock>
  <codeph>{
"name": "lb #1",
    "protocol":"tcp",
        "nodes":      [
                {
                    "address": "15.185.229.153",
                    "port": 443
                },
               {
                    "address": "15.185.226.163",
                    "port": 443
                },
               ],
}
</codeph>
</codeblock>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X POST -H "X-Auth-Token: {Auth_Token}" --data-binary "@lb.json" {BaseURI}/v1.1/loadbalancers
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
    "port":443,
    "id":"10",
    "protocol":"tcp",
    "updated":"2013-02-10T18:20Z",
    "created":"2013-02-10T18:20Z",
    "status":"BUILD",
    "nodes":[
        {   
            "port":443,
            "id":"19",
            "condition":"ENABLED",
            "status":"ONLINE",
            "address":"15.185.229.153"
        },
        {
            "port":443,
            "id":"20",
            "condition":"ENABLED",
            "status":"ONLINE",
            "address":"15.185.226.163"
        }
    ],
    "name":"lb #1",
    "virtualIps":[
        {
            "id":5,
            "address":"15.185.96.125",
            "ipVersion":"IPV_4",
            "type":"PUBLIC"
        }
    ],
    "algorithm":"ROUND_ROBIN",
    "options": {"timeout": 30000, "retries": 3}
}
</codeph>
</codeblock>
</section>
<section id="api-modify"> <title>5.6.4 Update an Existing Load Balancer</title>
</section>
<section id="put-v11loadbalancersloadbalancerid"> <title>PUT /v1.1/loadbalancers/{loadbalancerId}</title>
<p>
  <b>Description</b>
</p>
<p>This operation updates the attributes of the specified load balancer. Upon successful validation of the request, the service will return a 202 (Accepted) response code. A caller should check that the load balancer status is ACTIVE to confirm that the update has taken effect. If the load balancer status is 'PENDING_UPDATE' then the caller can poll the load balancer with its ID (using a GET operation) to wait for the changes to be applied and the load balancer to return to an ACTIVE status.</p>
<p>This operation allows the caller to change one or more of the following attributes:</p>
<ul>
<li>name</li>
<li>algorithm</li>
<li>options</li>
</ul>
<p>This operation does not return a response body.</p>
<p>
<b>Note:</b> The load balancer ID, status, port and protocol are immutable attributes and cannot be modified by the caller. Supplying an unsupported attribute will result in a 400 (badRequest) fault.</p>
<p>
  <b>Request Data</b>
</p>
<p>Load balancer body with attributes to be updated.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>
  <b>Example</b>
</p>
<codeblock>
  <codeph>{
    "name": "newname-loadbalancer",
    "algorithm": "LEAST_CONNECTIONS",
    "options": {"timeout": 30000, "retries": 3}
}
</codeph>
</codeblock>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>None.</p>
<p>
  <b>Error Response Codes</b>
</p>
<p>| HTTP Status Code | Description         |
|:-----------------|:--------------------|
|400               |Bad Request          |
|401               |Unauthorized         |
|404               |Not Found            |
|405               |Not Allowed          |
|500               |LBaaS Fault          |
|503               |Service Unavailable  |
<b>Example</b>
</p>
<p>
  <b>Contents of Request file lb.json</b>
</p>
<codeblock>
  <codeph>{
    "name": "newname-loadbalancer",
    "algorithm": "LEAST_CONNECTIONS",
    "options": {"timeout": 30000, "retries": 3}
}
</codeph>
</codeblock>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X PUT -H "X-Auth-Token: {Auth_Token}" --data-binary "@lb.json" {BaseURI}/v1.1/loadbalancers/{loadbalancerID}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with no response body.</p>
</section>
<section id="api-delete"> <title>5.6.5 Delete Load Balancer</title>
</section>
<section id="delete-v11loadbalancersloadbalancerid"> <title>DELETE /v1.1/loadbalancers/{loadbalancerId}</title>
<p>
  <b>Description</b>
</p>
<p>Delete load balancer removes the specified load balancer and its associated configuration from the account. Any and all configuration data is immediately purged and is not recoverable.</p>
<p>
  <b>Request Data</b>
</p>
<p>This operation does not require a request body.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>None.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerID}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with no response body.</p>
</section>
<section id="57-nodes"> <title>5.7 Nodes</title>
</section>
<section id="api-node-list"> <title>5.7.1 List All Load Balancer Nodes</title>
</section>
<section id="get-v11loadbalancersloadbalanceridnodes"> <title>GET /v1.1/loadbalancers/{loadbalancerId}/nodes</title>
<p>
  <b>Description</b>
</p>
<p>List all nodes for a specified load balancer.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer nodes requested or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerID}/nodes
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"nodes" : [
            {
                "id":"410",
                "address":"15.185.1.1",
                "port":80,
                "condition":"ENABLED",
                "status":"ONLINE"
            },
            {
                "id":"236",
                "address":"15.185.1.2",
                "port":80,
                "condition":"ENABLED",
                "status":"ONLINE"
            },
            {
                "id":"2815",
                "address":"15.185.1.3",
                "port":83,
                "condition":"DISABLED",
                "status":"OFFLINE"
            },
            ]
}   
</codeph>
</codeblock>
</section>
<section id="api-node-status"> <title>5.7.2 Get Load Balancer Node</title>
</section>
<section id="get-v11loadbalancersloadbalanceridnodesnodeid"> <title>GET /v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</title>
<p>
  <b>Description</b>
</p>
<p>This operation retrieves the configuration of a node.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer node requested or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
    "id":"410",
    "address":"15.185.1.2",
    "port":80,
    "condition":"ENABLED",
    "status":"ONLINE"
}
</codeph>
</codeblock>
</section>
<section id="api-node-create"> <title>5.7.3 Create Load Balancer Node</title>
</section>
<section id="post-v11loadbalancersloadbalanceridnodes"> <title>POST /v1.1/loadbalancers/{loadbalancerId}/nodes/</title>
<p>
  <b>Description</b>
</p>
<p>Add a new node to any existing load balancer. When a node is added, it is assigned a unique identifier that can be used for mutating operations such as changing the condition, or removing the node from the load balancer. When a node is added to a load balancer it is enabled by default.</p>
<p>
  <b>Request Data</b>
</p>
<p>The request must contain information regarding the new node to be added. More than one node can be added at a time.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>The request body defines the attributes of the new node to be created.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer requested or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<p>| HTTP Status Code | Description         |
|:-----------------|:--------------------|
|400               |Bad Request          |
|401               |Unauthorized         |
|404               |Not Found            |
|405               |Not Allowed          |
|413               |Over Limit           |
|500               |LBaaS Fault          |
|503               |Service Unavailable  |
<b>Example</b>
</p>
<p>
  <b>Contents of Request file nodes.json</b>
</p>
<codeblock>
  <codeph>{
"nodes": [
                {
                    "address": "15.185.1.1",
                    "port": 80
                },
                {
                    "address": "15.185.2.1",
                    "port": 80
                },
                {
                    "address": "15.185.2.2",
                    "port": 88,
                    "condition": "DISABLED"
                }
        ]
}
</codeph>
</codeblock>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X POST -H "X-Auth-Token: {Auth_Token}" --data-binary "@nodes.json" {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/nodes
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"nodes": [
                {
                    "id": "7298",
                    "address": "15.185.1.1",
                    "port": 80,
                    "condition": "ENABLED",
                    "status": "ONLINE"
                },
                {
                    "id": "293",
                    "address": "15.185.2.1",
                    "port": 80,
                    "condition": "ENABLED",
                    "status": "OFFLINE"
                },
                {
                    "id": "183",
                    "address": "15.185.2.2",
                    "port": 88,
                    "condition": "DISABLED",
                    "status": "OFFLINE"
                }
        ]
}
</codeph>
</codeblock>
</section>
<section id="api-node-modify"> <title>5.7.4 Update Load Balancer Node Condition</title>
</section>
<section id="put-v11loadbalancersloadbalanceridnodesnodeid"> <title>PUT /v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</title>
<p>
  <b>Description</b>
</p>
<p>Every node in the load balancer is either enabled or disabled which determines its role within the load balancer. When the node has condition='ENABLED' the node is permitted to accept new connections. Its status will eventually become 'ONLINE' to reflect this configuration. When the node has condition='DISABLED' the node is not permitted to accept any new connections. Existing connections to the node are forcibly terminated. The nodes status changes to OFFLINE once the configuration has been successfully applied.</p>
<p>The node IP and port are immutable attributes and cannot be modified with a PUT request. Supplying an unsupported attribute will result in a 400 fault. A load balancer supports a maximum number of nodes. The maximum number of nodes per load balancer is returned when querying the limits of the load balancer service.</p>
<p>
  <b>Request Data</b>
</p>
<p>Request data includes the desired condition of the node.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>The request body includes the node 'condition' attribute and its desired state.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>None.</p>
<p>
  <b>Error Response Codes</b>
</p>
<p>| HTTP Status Code | Description         |
|:-----------------|:--------------------|
|400               |Bad Request          |
|401               |Unauthorized         |
|404               |Not Found            |
|405               |Not Allowed          |
|500               |LBaaS Fault          |
|503               |Service Unavailable  |
<b>Example</b>
</p>
<p>
  <b>Contents of Request file node.json</b>
</p>
<codeblock>
  <codeph>{
    "condition": "DISABLED"
}
</codeph>
</codeblock>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X PUT -H "X-Auth-Token: {Auth_Token}" --data-binary "@node.json" {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with no response body.</p>
</section>
<section id="api-node-delete"> <title>5.7.5 Delete Load Balancer Node</title>
</section>
<section id="delete-v11loadbalancersloadbalanceridnodesnodeid"> <title>DELETE /v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}</title>
<p>
  <b>Description</b>
</p>
<p>Delete node for a load balancer.</p>
<p>
<b>Note</b>: A load balancer must have at least one node. Attempting to remove the last node of a load balancer will result in a 401 error.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry align="left">Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>None.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
<row>
<entry align="left">503</entry>
  <entry align="left">Service Unavailable</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with no response body.</p>
</section>
<section id="58-virtual-ip"> <title>5.8 Virtual IP</title>
</section>
<section id="api-vips"> <title>5.8.1 Get List of Virtual IPs</title>
</section>
<section id="get-v11loadbalancersloadbalanceridvirtualips"> <title>GET /v1.1/loadbalancers/{loadbalancerId}/virtualips</title>
<p>
  <b>Description</b>
</p>
<p>This operation lists all the virtual IP addresses of a load balancer. The maximum number of VIPs that can be configured when creating a load balancer can be discovered by querying the limits of the load balancer service.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry align="left">OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the load balancer VIP list requested or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry align="left">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry align="left">Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry align="left">Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry align="left">Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry align="left">Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry align="left">LBaaS Fault</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Request</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/nodes/{nodeId}/virtualips
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"virtualIps": [
                {
                    "id": 1021,
                    "address": "15.186.10.210",
                    "type": "PUBLIC",
                    "ipVersion": "IPV4"
                }
                ]
}
</codeph>
</codeblock>
</section>
<section id="59-health-monitor"> <title>5.9 Health Monitor</title>
</section>
<section id="api-monitor-status"> <title>5.9.1 Get Load Balancer Health Monitor</title>
</section>
<section id="get-v11loadbalancersloadbalanceridhealthmonitor"> <title>GET /v1.1/loadbalancers/{loadbalancerId}/healthmonitor</title>
<p>
  <b>Description</b>
</p>
<p>This operation retrieves the current configuration of a load balancer health monitor.</p>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">200</entry>
  <entry>OK</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the health monitor for the requested load balancer or 404, if not found.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry>Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry>Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry>Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry>Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry>LBaaS Fault</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X GET -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/healthmonitor
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<codeblock>
  <codeph>{
"type": "CONNECT",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2"
}
</codeph>
</codeblock>
<p>or..</p>
<codeblock>
  <codeph>{
"type": "HTTP",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2",
"path": "/healthcheck"
}
</codeph>
</codeblock>
</section>
<section id="api-monitor-modify"> <title>5.9.2 Update Load Balancer Health Monitor</title>
</section>
<section id="put-v11loadbalancersloadbalanceridhealthmonitor"> <title>PUT /v1.1/loadbalancers/{loadbalancerId}/healthmonitor</title>
<p>
  <b>Description</b>
</p>
<p>Active health monitoring provides two types of health monitors: CONNECT or HTTP. The caller can configure one health monitor per load balancer.  The health monitor has a type attribute to signify which types it is. The required attributes for each type is as follows:</p>
<p>
  <b>CONNECT Monitor</b>
</p>
<p>The monitor connects to each node on its defined port to ensure that the node is listening properly.
The CONNECT monitor is the most basic type of health check and does not perform post-processing or protocol specific health checks. It includes several configurable properties:</p>
<ul>
<li>delay: This is the minimum time in seconds between regular calls to a monitor. The default is 30 seconds.</li>
<li>timeout: Maximum number of seconds for a monitor to wait for a connection to be established to the node before it times out. The value cannot be greater than the delay value. The default is 30 seconds.</li>
<li>attemptsBeforeDeactivation: Number of permissible monitor failures before removing a node from rotation. Must be a number between 1 and 10. The default is 2 attempts.</li>
</ul>
<p>
  <b>HTTP Monitor</b>
</p>
<p>The HTTP monitor is more intelligent than the CONNECT monitor. It is capable of processing an HTTP response to determine the condition of a node. It supports the same basic properties as the CONNECT monitor and includes the additional attribute of path that is used to evaluate the HTTP response to a monitor probe.</p>
<ul>
<li>path: The HTTP path used in the HTTP request by the monitor. This must be a string beginning with a / (forward slash). The monitor expects a response from the node with an HTTP status code of 200.</li>
</ul>
<p>The default Health Monitor Configuration, when a load balancer is created is:</p>
<codeblock>
  <codeph>{
"type": "CONNECT",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2"
}
</codeph>
</codeblock>
<p>
  <b>Request Data</b>
</p>
<p>Request data includes the desired configuration attributes of the health monitor.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>The request body includes the health monitor attributes.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry>Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>The response body contains the health monitor requested</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry>Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry>Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry>Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry>Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry>LBaaS Fault</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Example</b>
</p>
<p>Contents of Request file node.json</p>
<codeblock>
  <codeph>{
"type": "CONNECT",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2"
}
</codeph>
</codeblock>
<p>or..</p>
<codeblock>
  <codeph>{
"type": "HTTP",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2",
"path": "/healthcheck"
}
</codeph>
</codeblock>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X PUT -H "X-Auth-Token: {Auth_Token}" --data-binary "@node.json" {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/healthmonitor
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with the following response body.</p>
<codeblock>
  <codeph>{
"type": "CONNECT",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2"
}
</codeph>
</codeblock>
<p>or..</p>
<codeblock>
  <codeph>{
"type": "HTTP",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2",
"path": "/healthcheck"
}
</codeph>
</codeblock>
</section>
<section id="api-monitor-delete"> <title>5.9.3 Reset Load Balancer Health Monitor</title>
</section>
<section id="delete-v11loadbalancersloadbalanceridhealthmonitor"> <title>DELETE /v1.1/loadbalancers/{loadbalancerId}/healthmonitor</title>
<p>
  <b>Description</b>
</p>
<p>Reset health monitor settings for a load balancer back to the following default configuration.</p>
<codeblock>
  <codeph>{
"type": "CONNECT",
"delay": "30",
"timeout": "30",
"attemptsBeforeDeactivation": "2"
}
</codeph>
</codeblock>
<p>
  <b>Request Data</b>
</p>
<p>None required.</p>
<p>
  <b>Query Parameters Supported</b>
</p>
<p>None required.</p>
<p>
  <b>Required HTTP Header Values</b>
</p>
<p>X-Auth-Token</p>
<p>
  <b>Request Body</b>
</p>
<p>None required.</p>
<p>
  <b>Normal Response Code</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">202</entry>
  <entry>Accepted</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Response Body</b>
</p>
<p>None.</p>
<p>
  <b>Error Response Codes</b>
</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry align="left">HTTP Status Code</entry>
  <entry>Description</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left">400</entry>
  <entry>Bad Request</entry>
</row>
<row>
<entry align="left">401</entry>
  <entry>Unauthorized</entry>
</row>
<row>
<entry align="left">404</entry>
  <entry>Not Found</entry>
</row>
<row>
<entry align="left">405</entry>
  <entry>Not Allowed</entry>
</row>
<row>
<entry align="left">500</entry>
  <entry>LBaaS Fault</entry>
</row>
</tbody>
</tgroup>
</table>
<p>
  <b>Curl Example</b>
</p>
<codeblock>
  <codeph>curl -i -k -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json' -H 'X-Auth-Token: {Auth_Token}' {BaseURI}/v1.1/loadbalancers/{loadbalancerId}/healthmonitor
</codeph>
</codeblock>
<p>
  <b>Response</b>
</p>
<p>202 status with no response body.</p>
</section>
<section id="6-features-currently-not-implemented-or-supported"> <title>6. Features Currently Not Implemented or Supported</title>
<p>The following features are not supported.</p>
<ul>
<li>
<p>IPV6 address types are not supported.</p>
</li>
<li>
<p>SSL termination for load balancers is not currently supported.  Instead TCP will be used for port 443 and the HTTPS connections will be passed through the load balancer with no termination at the load balancer.</p>
</li>
</ul>
</section>
</body>
</topic>