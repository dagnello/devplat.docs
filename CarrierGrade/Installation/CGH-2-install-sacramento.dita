<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic xml:lang="en-us" id="topic10581">
  <title>HP Helion <tm tmtype="reg">OpenStack</tm> Carrier Grade 2.0 Beta: Deploying the sacramento
    Template</title>
  <prolog>
    <metadata>
      <othermeta name="layout" content="default"/>
      <othermeta name="product-version" content="HP Helion OpenStack Carrier Grade 1.1"/>
      <othermeta name="role" content="Storage Administrator"/>
      <othermeta name="role" content="Storage Architect"/>
      <othermeta name="role" content="Michael B"/>
      <othermeta name="product-version1" content="HP Helion OpenStack Carrier Grade 1.1"/>
    </metadata>
  </prolog>
  <body>
    <p>After the <xref href="carrier-grade-install-hlm-vm.dita#topic10581">Helion Lifecycle
        Management (HLM) VM is installed</xref>, the next task in installing the <xref
        href="carrier-grade-install-overview.dita#topic1925/install-option">KVM + ESX
        deployment</xref> is to deploy the HP Helion OpenStack cloud and install the HPE Distributed
      Cloud Networking (DCN) components. You must install the VMware ESX<tm tmtype="reg"/> compute
      proxy. </p>
    <p>If you are installing the <codeph>sacramento</codeph> template, which includes the KVM
      region, the baremetal region, ESX storage, and uses HPE DCN VRS networking, follow these
      instructions. If you are installing a different deployment, disregard these instructions. </p>
    <section conref="conrefs/CGH-2-conref-DCN-1.dita#ReusableComponent_nms_qyw_vt/prereqs"/>
    <section
      conref="conrefs/CGH-2-conref-ESX-2.dita#ReusableComponent_z2y_tyw_vt/section_efy_tyw_vt"/>
    <section conref="conrefs/CGH-2-conref-VDS-3.dita#ReusableComponent_gbx_czw_vt/vmware" id="vmware"/>
    <section conref="conrefs/CGH-2-conref-VRSvApp-4.dita#ReusableComponent_dqy_2zw_vt/vapp" id="vrsvapp"/>
    <section conref="conrefs/CGH-2-conref-VSD-5.dita#ReusableComponent_tlk_hzw_vt/vsd"/>
    <section
      conref="conrefs/CGH-2-conref-VSD-license-6.dita#ReusableComponent_u1w_jzw_vt/vsd-license"  id="vsd-license"/>
    <section
      conref="conrefs/CGH-2-conref-VSD-User-7.dita#ReusableComponent_ull_mzw_vt/create-user-for-plugin-login" id="vsd-user"/>
    <section
      conref="conrefs/CGH-2-conref-HLM-Define-8.dita#ReusableComponent_swm_qzw_vt/hos-install"/>
    <section
      conref="conrefs/CGH-2-conref-node-provision-8a.dita#ReusableComponent_ic3_q1x_wt/configure-node-provision-json"  id="node"/>
    <section
      conref="conrefs/CGH-2-conref-PXE-Boot-9.dita#ReusableComponent_t4b_wzw_vt/section_apb_wzw_vt"/>
    <section conref="conrefs/CGH-2-conref-json-intro.dita#ReusableComponent_dgx_hdy_wt/json" id="json"/>
    <section
      conref="conrefs/CGH-2-conref-definition-json-10.dita#ReusableComponent_zsb_b1x_vt/configure-def-json"/>
    <section
      conref="conrefs/CGH-2-conref-env-json-11.dita#ReusableComponent_wlx_d1x_vt/configure-env-json"/>
    <section
      conref="conrefs/CGH-2-conref-ansible-json-12.dita#ReusableComponent_dkh_g1x_vt/configure-ansible-json"/>
    <section
      conref="conrefs/CGH-2-conref-esx-json-13.dita#ReusableComponent_oy4_31x_vt/configure-esx-json"/>
    <section
      conref="conrefs/CGH-2-conref-LDAP-json-14.dita#ReusableComponent_vjm_l1x_vt/configure-ldap-json"/>
    <section conref="conrefs/CGH-2-conref-DCN-json-15.dita#ReusableComponent_cjk_41x_vt/dcn-json"/>
    <section
      conref="conrefs/CGH-2-conref-CCP-json-16.dita#ReusableComponent_art_q1x_vt/ccp-dcn-esx-json"/>
    <section
      conref="conrefs/CGH-2-conref-WR-json-17.dita#ReusableComponent_m5f_t1x_vt/configure-wr-json"/>
    <section
      conref="conrefs/CGH-2-conref-Machine-json-18.dita#ReusableComponent_a5m_v1x_vt/configure-mach-json"/>
    <section>
      <title>Configure the ironic.json file</title>
      <p>Modify the <codeph>ironic.json</codeph> file in the
          <codeph>/var/hlm/clouds/&lt;cloudname>/vars</codeph> directory to set
          <codeph>ignore_tenant_network</codeph> to <codeph>True</codeph>. Where
          <codeph>&lt;cloudname></codeph> is the name of your
        cloud.<codeblock>{
  "product": {
        "version": 1
  },
  "property-groups": [
    {
       "name": "ironic-vars",
       "properties": {
         "ignore_tenant_network" : "True"       
         }
    }
  ]
}</codeblock></p>
    </section>
    <section>
      <title>Configure the neutron-bm.json file</title>
      <p>Modify the <codeph>neutron-bm.json</codeph> file in the
          <codeph>/var/hlm/clouds/&lt;cloudname>/vars</codeph> directory to to specify networking
        information. Where <codeph>&lt;cloudname></codeph> is the name of your cloud.</p>
      <p>
        <codeblock>{
  "product": {
        "version": 1
  },
  "property-groups": [
    {
       "name": "neutron-vars",
       "properties": {
         "switch_channel_timeout": "180",
         "vlan_range": "339:340",
         "bm_interface": "eth1",
         "prov_network": {
            "vlan": "1579",
            "cidr": "10.200.79.0 /24",
            "ip_start_address": "10.200.79.50",
            "ip_end_address": "10.200.79.200",
            "ip_gateway": "10.200.79.1"
          }
       }
     }
  ]
}</codeblock>
      </p>
    </section>
    <section
      conref="conrefs/CGH-2-conref-Verify-json-19.dita#ReusableComponent_upw_x1x_vt/verify-json"/>
    
    <section conref="conrefs/CGH-2-conref-esx-proxy-20.dita#ReusableComponent_hyj_bbx_vt/esx-proxy" id="esx-proxy"/>
    <section id="vmware-workaround">
      <title>Deploy the vmWare Installation Workaround</title>
      <p>When powering on the ESX Compute Proxy VM, you might receive a
          <codeph>VMK_NO_MEMORY</codeph> error. This is a known problem with HP server and ESXi 5.x.
        To prevent this issue, you need to upgrade the version of the HP Agentless Management
        Service (AMS) that comes with the HP servers. </p>
      <p>For more information, see <xref href="CGH-2-install-vmware-workaround.dita#topic10581"
          >vmWare Installation Workaround</xref>.</p>
    </section>
    <section
      conref="conrefs/CGH-2-conref-HLM-provision-21.dita#ReusableComponent_vds_dbx_vt/create-a-new-cloud-template-and-bring-the-cloud-nodes-up"/>
    <section
      conref="conrefs/CGH-2-conref-backend-drivers-22.dita#ReusableComponent_fd1_hbx_vt/back-end" id="backend"/>
    <section>
      <title>Configure baremetal node ports into access mode</title>
      <p>Ensure that the switch ports connected to baremetal instance nodes are in access mode. This
        is a pre-requisite before provisioning baremetal instances. </p>
      <p>The following example assumes you are using an HP FlexFabric 5930 Switch:
        <codeblock>system-view
interface &lt;interface-name&gt; &lt;port&gt;
port link-type access 
save force quit 
quit </codeblock></p>
      <p><b>Example:</b></p>
      <codeblock>&lt;FTC-R146340-5930A&gt;system-view
System View: return to User View with Ctrl+Z.
[FTC-R146340-5930A]interface Ten-GigabitEthernet 1/0/9:4
[FTC-R146340-5930A-Ten-GigabitEthernet1/0/9:4]port link-type access
[FTC-R146340-5930A-Ten-GigabitEthernet1/0/9:4]save force
Validating file. Please wait...
Saved the current configuration to mainboard device successfully.
[FTC-R146340-5930A-Ten-GigabitEthernet1/0/9:4]quit
[FTC-R146340-5930A]quit
&lt;FTC-R146340-5930A&gt;</codeblock>
    </section>
    <section
      conref="conrefs/CGH-2-conref-generate-init-23.dita#ReusableComponent_q43_nbx_vt/hos-cloud"/>
    <section conref="conrefs/CGH-2-conref-hlm-deploy-24.dita#ReusableComponent_urx_xbx_vt/hdeploy"/>
    
    <section
      conref="conrefs/CGH-2-conref-ldap-config-25.dita#ReusableComponent_y3j_1cx_vt/patch-after" id="ldap3"/>
    <section
      conref="conrefs/CGH-2-conref-verify-vsc-26.dita#ReusableComponent_cyy_ccx_vt/section_jyy_ccx_vt"/>
    <section
      conref="conrefs/CGH-2-conref-verify-vrsg-27.dita#ReusableComponent_ich_gcx_vt/section_mch_gcx_vt"/>
    
    <section id="next-step">
      <title>Next Step</title>
      <p><xref href="CGH-2-install-infoblox.dita#topic15959">Installing Infoblox</xref></p>
      <p><xref href="carrier-grade-install-launch-horizon.dita#topic10581">Launching the Horizon
          Interface</xref></p>
      <!--<p><xref href="carrier-grade-install-kvm-cloud.dita">Deploying the KVM Region</xref></p>-->
    </section>
  </body>
</topic>
