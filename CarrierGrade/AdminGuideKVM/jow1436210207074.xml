<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic id="jow1436210207074" xml:lang="en-us">
<!-- Modification History
        
-->
    <title>Affining a VM to a NUMA Node with a vSwitch Core</title>
    <shortdesc>You can select whether to place a VM in the same NUMA node as a
        vSwitch (AVS) core.</shortdesc>
    <prolog><author/>
        <author/>
    </prolog>
    <body>
        
            <p>For optimal networking performance, you can set an extra spec so that
                a VM is instantiated on a host only if the host can offer a NUMA node with at least
                one core assigned as a vSwitch. You can optionally specify best-effort placement, so
                that if a suitable host is unavailable, the VM is still instantiated, but using a
                NUMA node without a vSwitch core.</p>
            <p>To add this extra spec to a flavor using the web administration
                interface, use the <codeph>Vswitch NUMA Affinity</codeph>
                selection in the <codeph>Create Flavor Extra Spec</codeph>
                drop-down menu. To access this menu, see <xref href="jow1429538642910.xml"/>.</p>
            <p>You can also specify the extra spec from the CLI by setting the following parameter
                for a flavor:</p>
            <codeblock>hw:wrs:vswitch_numa_affinity=vswitch_affinity</codeblock>
            <p>where vswitch_affinity is one of
                the following:</p>
            <dl>
                <dlentry>
                    <dt>strict</dt>
                    <dd>
                        <p>Requires a host NUMA node that has a vSwitch core. For a
                            VM configured to use multiple NUMA nodes, each host NUMA node must have
                            a vSwitch core. If these conditions cannot be satisfied, the
                            instantiation fails.</p>
                    </dd>
                </dlentry>
                <dlentry>
                    <dt>prefer</dt>
                    <dd>
                        <p>Prefers a host NUMA node that has a vSwitch core. For a
                            VM configured to use multiple NUMA nodes,  prefers host NUMA nodes with
                            a vSwitch core for as many virtual NUMA nodes as possible. If these
                            conditions cannot be satisfied, another NUMA node can be used.</p>
                    </dd>
                </dlentry>
            </dl>
            <p>For information about assigning vSwitch cores on a host, see <xref href="jow1404333768530.xml"/>.</p>
        
    </body>
</topic>