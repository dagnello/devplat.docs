<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic id="jow1426625051841" xml:lang="en-us">
<!-- Modification History
        
-->
    <title>Pinning a vCPU to a Shared Physical CPU</title>
    <shortdesc>You can pin a vCPU to a shared physical CPU by using a flavor with the required extra
        specification.</shortdesc>
    <prolog><author/>
        <author/>
    </prolog>
    <body>
        
            <p>You can set up a shared physical CPU on the host to run low-load or
                non-real-time tasks for multiple VMs, freeing other cores on the host for dedicated
                high-load tasks. You can then use an extra spec to pin a specified vCPU to the
                shared physical CPU.</p>
        
        
            <p>To add the required extra specification to a flavor using the web
                administration interface, use the <b>Shared VCPU
                    ID</b> selection in the <b>Create Flavor Extra
                    Spec</b> drop-down menu. To access this menu, see <xref href="jow1429538642910.xml"/>.</p>
            <p>To set the Shared VCPU ID from the CLI, use a command of the
                following form:</p>
            <codeblock>~(keystone_admin)$ nova flavor-key <varname>flavor_name</varname> set hw:wrs:shared_vcpu=<varname>vcpu_id</varname></codeblock>
            <p>where <codeph>vcpu_id</codeph> is an
                integer that identifies the vcpu. The valid range starts at 0 and must be less than
                the <codeph>VCPUs</codeph> value defined for the flavor.</p>
        
        
            <p>To use this extra spec, you must define a shared physical CPU on at
                least one host. For more information, see <xref href="jow1426618822854.xml"/>. To support migration, shared physical CPUs on multiple hosts
                are recommended.</p>
            <p>You must also set the <codeph>CPU
                    Policy</codeph> extra specification for the flavor to <codeph>Dedicated</codeph>. This enables the high-load vCPUs for
                the instance to be pinned.</p>
        
    </body>
</topic>