<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic id="rst1441899910150" xml:lang="en-us">
<!-- Modification History
        
-->
    <title>Disabling Instance Auto Recovery</title>
    <shortdesc>You can disable auto recovery of failed virtual machine
        instances.</shortdesc>
    <prolog><author/>
        <author>Ron Stone</author>
    </prolog>
    <body>
        
            <p><draft-comment author="rstone">Topic added for
                    US61157</draft-comment>If this extra spec is not added, then the system will
                automatically recover failed virtual machine instances. Set this option to false if,
                for example, you are writing a Virtual Network Function Manager (VNFM) and the VNFM
                is to manage the auto-recovery of its VMs. Setting it to false disables this
                behavior. To re-enable virtual machine instance auto recovery, set the value to
                true. </p>
            <p>Instance auto-recovery can be configured as an extra spec on a
                flavor, such that any VM instance created with this flavor will have the specified
                instance auto-recovery. Alternatively, instance auto-recovery can be configured as
                meta-data on an image, such that any VM instance created based on the image will
                have the specified instance auto-recovery. Note that Flavor extra-specs will
                override the image meta-data.</p>
            <p>To set the option using the web administration interface, do one of
                the following:</p>
            <ul id="ul_orz_33t_lt">
                <li>
                    <p>As <term>admin</term>, use the <b>Instance Auto Recovery</b> selection in the <b>Create Flavor Extra Spec</b> drop-down menu. To
                        access this menu, see <xref href="jow1429538642910.xml"/>.</p>
                </li>

                    <li>
                    <p>As either <term>admin</term> or a tenant,
                        select 
                            <b>System</b> then
                            <b>Images</b> then
                            <b>Edit Image</b>
                            <uicontrol/>
                         for the desired images and uncheck the <b>Instance Auto Recovery</b> option. </p>
                </li>
                <!-- RS: Old/alternate method
                    <li>
                    <p>As either <term>admin</term> or a tenant, select <menucascade>
                            <b>System</b>
                            <b>Images</b>
                            <b>Edit Image</b>
                            <b>Update Metadata</b>
                        </menucascade> for the desired images and add an entry with:</p>
                    <codeblock>sw_wrs_auto_recovery=false</codeblock>
                </li> -->
            </ul>
        
        <ol>
             
                <li>To set the option from the command line do one of the
                    following.
                
                    <ul>
                        <li>As <term>admin</term>, add an extra spec to a
                            flavor:
                        <codeblock>~(keystone)admin)$ nova flavor-key flavorName set sw:wrs:auto_recovery=false</codeblock>
                        </li></ul>
                    <ul>
                        <li>As <term>admin</term> or a tenant:
                        <codeblock>~(keystone)admin)$ glance image-update --property sw_wrs_auto_recovery=false imageName</codeblock>
                        </li>
                    </ul>
                </li>
            
        </ol>
    </body>
</topic>
