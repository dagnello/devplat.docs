<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE topic   PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >


<topic id="jow1423089015252" xml:lang="en-us">


<!-- Modification History


        


-->


    <title>Provisioning Huge Pages Using the CLI</title>


    <shortdesc >You can edit the huge page attributes for a NUMA node from the


        CLI.</shortdesc>


    <prolog>


        <author >Jim Owens</author>


    </prolog>


    <body>


        <ol id="ol_brf_p33_dr">


            <li id="li_N10031_N1002D_N1001F_N10001" >


                <p >Lock the affected host.</p>


                


                    <codeblock ><systemoutput >(keystone_admin)$ </systemoutput><userinput >system host-lock <varname >hostname</varname></userinput></codeblock>


                


            </li>


            <li id="li_N1004D_N1002D_N1001F_N10001" >


                <p >Use the following command to set the huge page


                    attributes.</p>


                


                    <codeblock ><systemoutput >(keystone_admin)$ </systemoutput><userinput >system host-hugepage-update <varname >hostname</varname> <varname >processor</varname> -2M <varname >2Mpages</varname> -1G <varname >1Gpages</varname></userinput></codeblock>


                    <p >where</p>


                    <parml>


                        <plentry >


                            <pt >hostname</pt>


                            <pd >


                                <p >is the hostname or id of the compute node</p>


                            </pd>


                        </plentry>


                        <plentry >


                            <pt >processor</pt>


                            <pd >


                                <p >is the NUMA node of the compute node (0 or 1)</p>


                            </pd>


                        </plentry>


                        <plentry >


                            <pt >2Mpages</pt>


                            <pd >


                                <p >(if the optional <option >-2M</option> argument is


                                    included) the number of 2MiB huge pages to make available (if


                                    none, use 0).</p>


                            </pd>


                        </plentry>


                        <plentry >


                            <pt >1Gpages</pt>


                            <pd >


                                <p >(if the optional <option >-1G</option> argument is


                                    included) number of 1GiB huge pages to make available (if none,


                                    use 0)</p>


                            </pd>


                        </plentry>


                    </parml>


                


                


                    <p >For example, to allocate four 2 MiB huge pages for use by VMs


                        on NUMA node 1 of compute node <b >compute-0</b> :</p>


                    <codeblock ><systemoutput >(keystone_admin)$ </systemoutput><userinput >system host-hugepage-update compute-0 1 -2M 4</userinput></codeblock>


                


            </li>


            <li id="li_N100E8_N1002D_N1001F_N10001" >


                <p >Unlock the host.</p>


                


                    <codeblock ><systemoutput >(keystone_admin)$ </systemoutput><userinput >system host-unlock <varname >hostname</varname></userinput></codeblock>


                


            </li>


            <li id="li_N10104_N1002D_N1001F_N10001" >


                <p >Wait for the host to be reported as <b >available</b>. </p>


                


                    <codeblock ><systemoutput >(keystone_admin)$ </systemoutput><userinput >system host-list <varname >hostname</varname></userinput>


<systemoutput >+----+--------------+-------------+----------------+-------------+--------------+


| id | hostname     | personality | administrative | operational | availability |


+----+--------------+-------------+----------------+-------------+--------------+


| 1  | controller-0 | controller  | unlocked       | enabled     | available    |


| 2  | controller-1 | controller  | unlocked       | enabled     | available    |


| 3  | compute-0    | compute     | unlocked       | enabledd    | available      |


+----+--------------+-------------+----------------+-------------+--------------+</systemoutput></codeblock>


                


            </li>


        </ol>


    </body>


</topic>
