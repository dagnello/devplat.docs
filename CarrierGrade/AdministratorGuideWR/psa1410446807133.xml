<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE topic   PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >


<topic id="psa1410446807133" xml:lang="en-us">


<!-- Modification History


        


-->


    <title>Populating the Patch Storage Area</title>


    <shortdesc >Patches have to be uploaded to the HP Helion OpenStack Carrier Grade patch storage area


        before they can be applied.</shortdesc>


    <prolog>


        <author >Pedro Sanchez</author>


    </prolog>


    <body>


        <section id="section_N1001F_N1001C_N10001" />


        <ol>


            <li id="cli-admin-login" >


                <p >Log in as Keystone user <b >admin</b> to the active controller.</p>


                


                    <p >Log in as user <b >wrsroot</b> to the active controller and source the script


                            <filepath >/etc/nova/openrc</filepath> to obtain


                        administrative privileges as described in <xref href="jow1404333563834.xml" />.</p>


                


            </li>


            <li id="li_N1002B_N10028_N1001C_N10001" >


                <p >Upload the patch file to the patch storage area.</p>


                


                    <codeblock ><systemoutput >~(keystone_admin)$ </systemoutput><userinput >sudo wrs-patch upload /tmp/patches/</userinput></codeblock>


                


                


                    <p >This example uploads a single patch to the storage area. You


                        can specify multiple patch files on the same command separating their names


                        with spaces.</p>


                    <p >Alternatively, you can upload all patch files stored in a directory using a


                        single command, as illustrated in the following example:</p>


                    <codeblock ><systemoutput >~(keystone_admin)$ </systemoutput><userinput >sudo wrs-patch upload-dir /tmp/patches</userinput></codeblock>


                


                


                    <p >The patch files are available now in the patch storage area, but they have


                        not yet been applied to the cluster.</p>


                


            </li>


            <li id="li_N10051_N10028_N1001C_N10001" >


                <p >Verify the status of the patch.</p>


                


                    <codeblock ><systemoutput >~(keystone_admin)$ </systemoutput><userinput >sudo wrs-patch query</userinput>


<systemoutput >ï»¿       Patch ID             Patch State


=========================   ===========


PATCH_0001   Available</systemoutput></codeblock>


                    <p >The patch state is <i >Available</i> now, indicating that it is included in


                        the patch storage area. Further details about the patch can be retrieved as


                        follows:</p>


                    <codeblock ><systemoutput >~(keystone_admin)$ </systemoutput><userinput >sudo wrs-patch show PATCH_0001</userinput>


<systemoutput >PATCH_0001:


    Patch State:    Available


    Release Status: Released


    Summary:        Add logs to hbsClient and libalarm-clock


    Description:    Modified log in hbsClient. Expect to see this log on


                    all blade types  'hbsClient patches by


                    PATCH_0001' when hbsClient


                    restarts. Also added a log to ac_init() function


                    that reads "PATCH_0001 patched


                    libalarm-clock".  Should be seen when heartbeat


                    process is restarted on controller and compute.


    Install Instructions:


                    install text here


    Requires:


                    PATCH_0001


    Contents:


                    mtce-common-1.0-r23.x86_64.rpm


                    mtce-common-dev-1.0-r23.x86_64.rpm


                    mtce-common-pmon-1.0-r23.x86_64.rpm


                    mtce-common-rmon-1.0-r23.x86_64.rpm


                    libalarm-clock-1.0-r1.x86_64.rpm</systemoutput></codeblock>


                


            </li>


            <li id="li_N100D8_N1002D_N1001F_N10001" >


                <p importance="optional" >Delete a patch from the patch storage area.</p>


                


                    <p >Patches in the <i >Available</i> state can be


                        deleted as illustrated in the following command:</p>


                


                


                    <codeblock ><systemoutput >~(keystone_admin)$ </systemoutput><userinput >sudo wrs-patch delete PATCH_0001</userinput></codeblock>


                    <p >The patch to delete from the patch storage area is identified


                        by the patch ID reported by the <i >wrs-patch


                            query</i> command. You can provide multiple patch IDs to the


                        delete command separated by spaces.</p>


                


            </li>


        </ol>


    </body>


</topic>
