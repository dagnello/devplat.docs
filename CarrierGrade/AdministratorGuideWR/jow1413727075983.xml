<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE topic   PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" ><topic id="jow1413727075983" xml:lang="en-us"><!-- Modification History        -->    <title>Changing Storage Space Allotments on the Controller</title>    <shortdesc >You can change the allotments for controller-based storage at any        time after installation. This includes the space allotted for database, image, and backup        storage, and for clusters using an LVM backend, the space allotted for Cinder volume        storage.</shortdesc>    <prolog>        <author >Jim Owens</author>    </prolog>    <body>        <section id="section_N1001F_N1001C_N10001" >            <note id="note_N10096_N10022_N1001F_N10001" >                <p >Cinder volume storage is allotted using 3PAR, not on the                    controller node. </p>            </note>            <p >During software installation, the HP Helion OpenStack Carrier Grade is configured with                the following storage allotments.</p>            <dl>                <dlentry >                    <dt >Database storage</dt>                    <dd >                        <p >The storage allotment for the OpenStack database.</p>                    </dd>                </dlentry>                <dlentry >                    <dt >Image storage</dt>                    <dd >                        <p >The size of the partition to use for image storage.</p>                    </dd>                </dlentry>                <dlentry >                    <dt >Backup storage</dt>                    <dd >                        <p >The storage allotment for backup operations.</p>                    </dd>                </dlentry>                <dlentry >                    <dt >Volume storage</dt>                    <dd >                        <p >For a system using LVM storage, the storage allotment                            for all Cinder volumes used by guest instances.</p>                    </dd>                </dlentry>            </dl>            <p >You can change these allotments using the <wintitle >System Configuration</wintitle> controls in the web administration interface,                or using the CLI. For CLI instructions, see <xref href="jow1413729179585.xml" />.</p>            <p >To accommodate the changes, there must be enough disk space on the                controller, including headroom needed to complete the operation. The headroom                required is 45 GiB on the primary disk for a cluster using an LVM backend. This is                in addition to the space required for the new allotments. The requested changes are                checked against available space on the affected disks; if there is not enough, the                changes are disallowed.</p>            <p >To provide more space, you can replace the affected disk or disks.                Database, image, and backup storage use space on the primary disk. Cinder volume                storage (on a cluster with an LVM backend) uses space on a disk selected by device                node number during controller configuration. The replacement disk must occupy the                same device node number. Changes to the Cinder volume storage may also affect the                primary disk because of the headroom requirement.</p>            <p >To pass the disk-space checks, any replacement disks must be                installed before the allotments are changed.</p>            <note id="note_N100A9_N10022_N1001F_N10001"  type="caution">                <p > The configurations for <b >controller-0</b> and <b >controller-1</b> must be identical. If you make changes to one,                    you must make the same changes to the other.</p>            </note>            <p >Changes to the storage allotments require a reinstallation of the                HP Helion OpenStack Carrier Grade host software on the controllers, even if the primary disk is not                replaced.</p>            <note conref="rst1432737677834.xml#rst1432737677834/note_N10195_N10154_N1001F_N10001" id="note_N10195_N10154_N1001F_N10001" />                                                    </section>        <section id="section_N10022_N1001F_N10001" >            <p >Before changing storage allotments, prepare as follows:</p>            <ul id="ul_p3d_2h5_vp">                <li >                    <p >Calculate your system storage requirements using the <cite >HP Helion OpenStack Carrier Grade System Engineering Guidelines</cite>.                        Include the headroom required for changes to the storage space                        allotments.</p>                </li>                <li >                    <p >Record the current configuration settings in case they need                        to be restored (for example, because of an unexpected interruption during                        changes to the system configuration). Consult the configuration plan for                        your system.</p>                </li>            </ul>        </section>        <ol>            <li id="li_N100F4_N100F1_N1001F_N10001" >                <p >If necessary, install replacement disks in the controllers.</p>                                    <p >If you do not need to replace disks, you can skip this li.                        To determine whether you need to replace disks, calculate your storage                        requirements using the <cite >HP Helion OpenStack Carrier Grade System                            Engineering Guidelines</cite>. Be sure to include the headroom required                        on the primary disk.</p>                    <p >To replace disks in the controllers, follow these ol. For                        more details, see <xref href="jow1414074190480.xml" />.</p>                                <ol id="ol_wzh_2kt_4q">                    <li >                        <p >Lock the standby controller.</p>                    </li>                    <li >                        <p >Power down the standby controller.</p>                    </li>                    <li >                        <p >Make any required hardware changes.</p>                    </li>                    <li >                        <p >Power up the standby controller.</p>                    </li>                    <li >                        <p >Reinstall the HP Helion OpenStack Carrier Grade software on the standby controller.</p>                    </li>                    <li >                        <p >Unlock the standby controller.</p>                    </li>                    <li >                        <p >Swact the controllers.</p>                    </li>                    <li >                        <p >Repeat these ol for the new standby                            controller.</p>                    </li>                </ol>            </li>            <li id="li_N101EF_N100F1_N1001F_N10001" >                <p >Edit the disk storage allotments.</p>                <ol id="ol_kvh_bh5_4q">                    <li >                        <p >In the HP Helion OpenStack Carrier Grade web administration interface, open the <wintitle >System Configuration</wintitle> pane.</p>                                                    <p > The <wintitle >System                                    Configuration</wintitle> pane is available from the <uicontrol >System Panel</uicontrol> section of the                                    <uicontrol >Admin</uicontrol> menu. </p>                                            </li>                    <li >                        <p >Select the <wintitle >Controller Filesystem</wintitle>                            tab.</p>                                                    <p >The <wintitle >Controller                                    Filesystem</wintitle> page appears, showing the currently                                defined storage allotments.</p>                            <fig id="fig_t3s_4mz_5p" >                                <image href="jow1413850529975.image" id="image_gtf_dwc_vp"  width="6in">                                    <alt >Controller filesystem page</alt>                                </image>                            </fig>                                            </li>                    <li >                        <p >Click <uicontrol >Edit                                Filesystem</uicontrol>.</p>                                                    <p >The <wintitle >Edit Controller                                    Filesystem</wintitle> dialog box appears.</p>                            <fig id="fig_tmw_qnz_5p" >                                <image href="jow1413850558829.image" id="image_khj_nwc_vp"  width="4in">                                    <alt >Edit Controller Filesystem dialog</alt>                                </image>                            </fig>                            <note id="note_N10146_N10124_N10115_N100B7_N1001F_N10001" >                                <p >The <uicontrol >Cinder storage                                        (GiB)</uicontrol> field is present only for clusters using                                    the LVM backend.</p>                            </note>                                            </li>                    <li >                        <p >Replace the storage allotments as required.</p>                    </li>                    <li >                        <p >Click <uicontrol >Save</uicontrol>.</p>                    </li>                </ol>                                    <p >This raises major alarms against the controllers                            (<b >250.001 Configuration                            out-of-date</b>). You can view the alarms on the Fault                        Management page. In addition, the status <b >Config out-of-date</b> is shown for the controllers in the                            <wintitle >Hosts</wintitle> list.</p>                            </li>            <li id="li_N100BF_N1002B_N1001D_N10001" >                <p >Lock the standby controller. </p>            </li>            <li id="li_N102CD_N100F1_N1001F_N10001" >                <p >Reinstall the HP Helion OpenStack Carrier Grade software on the standby                    controller.</p>                                    <p >This li is required to update the system configuration, even if you have                        already reinstalled the HP Helion OpenStack Carrier Grade software as part of the disk                        replacement procedure.</p>                            </li>            <li id="li_N102D6_N100F1_N1001F_N10001" >                <p >Unlock the standby controller.</p>                                    <p >When the controller is unlocked, the <b >250.001 Configuration out-of-date</b> alarms                        against the controller are cleared.</p>                            </li>            <li id="li_N102DF_N100F1_N1001F_N10001" >                <p >Swact the controllers.</p>            </li>            <li id="li_N10284_N100F2_N1001F_N10001" >                <p >Lock the new standby controller.</p>            </li>            <li id="li_N102E8_N100F1_N1001F_N10001" >                <p >Reinstall the HP Helion OpenStack Carrier Grade software on the                    controller.</p>            </li>            <li id="li_N102F1_N100F1_N1001F_N10001" >                <p >Unlock the controller.</p>            </li>            <li id="li_N1025E_N100B7_N1001F_N10001" >                <p >Confirm that the <b >250.001                        Configuration out-of-date</b> alarms are cleared for both                    controllers.</p>            </li>        </ol>        <section id="section_N10323_N1001F_N10001" >            <p >After making these changes, ensure that the configuration plan for                your system is updated with the new storage allotments and disk sizes.</p>        </section>    </body></topic>