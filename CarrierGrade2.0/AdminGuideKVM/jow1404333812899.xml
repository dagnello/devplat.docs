<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic id="jow1404333812899">
    <!-- Modification History
        
-->
    <title>Creating an In/Out Autoscaling Resource</title>
    <shortdesc>The <filepath>CombinationAutoscaling.yaml</filepath>
        template illustrates the use of a template to create an in/out autoscaling
        resource.</shortdesc>
    <prolog><author/>
        
    </prolog>
    <body>
        
            <p>This HOT template creates a load balancer VM
                    (<codeph>OS::Nova::Server</codeph>) and a scalable pool of server VMs
                    (<codeph>OS::Heat::AutoScalingGroup</codeph> of
                    <codeph>OS::Nova:Server</codeph>). The associated OS::Ceilometer:Alarm
                and OS::Heat::ScalingPolicy resources are based on a passed-in platform link
                utilization meter. Instances are added or removed based on this information.</p>
            <p>Use an <codeph>admin</codeph> account to run
                this template.</p>
        
        <ol>
             
                <li>Collect the required parameter values for this template.
                 <ol>
                    
                        <li conref="jow1404333809730.xml#jow1404333809730/locate-flavor"/>
                    
                    
                        <li conref="jow1404333809730.xml#jow1404333809730/locate-keypair"/>
                    
                    
                        <li conref="jow1404333809730.xml#jow1404333809730/locate-image"/>
                    
                    
                        <li>On the
                                <b>Admin</b>, then
                                <b>System Panel</b>, then
                                <b>Networks</b>
                             page, click the <b>Name</b> of each required network in turn, in order to open
                            the Network Overview page and obtain the network <b>ID</b>. For this template, a public network
                            ID and an internal network ID are required.</li>
                    
                </ol>
                </li>
            <li conref="jow1404832975002.xml#jow1404832975002/open-stack-list" id="step_N10096_N10059_N10020_N10001"></li>
            <li conref="jow1404833049288.xml#jow1404833049288/launch-stack" id="step_N1009D_N10059_N10020_N10001"></li>
            
             
                <li>Select<b> File</b>, then click
                        <b>Browse</b> and select <filepath>CombinationAutoscaling.yaml</filepath> from the local
                    disk.</li>
            
             
                <li>Use the <b>Launch Stack</b> form to provide the required
                    parameter values for the template. 
                
                    
                        <image alt="CPUScale Launch Stack form" href="jow1404333811339.image" id="image_dvz_1wj_j4" width="4in"/>
                    
                    <note id="note_N100E1_N100D1_N100C6_N10059_N10020_N10001">
                        <p>The parameters are presented in a single column. This image has been
                            edited to present them in two columns.</p>
                    </note>
                
                </li>
             
                <li>Adjust existing values to meet your requirements.
                <table>
                    <tgroup cols="2">
                        <tbody>
                         
                    <row>
                        <entry>
                            <p><b>KeyName</b></p>
                        </entry>
                        <entry>
                            <p>The <b>KeyPair</b>
                                name from the<b> Access &amp;
                                    Security</b> page.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>ViFModel</b></p>
                        </entry>
                        <entry>
                            <p>The virtual interface model to use. For valid
                                choices, see <cite>Multiple NIC Support</cite> in
                                    <xref href="jow1404333807231.xml"/>.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>InstanceType</b></p>
                        </entry>
                        <entry>
                            <p>The <b>Flavor
                                    Name</b> from the <b>Flavors</b> page.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>ImageId</b></p>
                        </entry>
                        <entry>
                            <p>The <b>Image
                                    Name</b> from the <b>Images</b> page.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>PublicNetId</b></p>
                        </entry>
                        <entry>
                            <p>The <b>ID</b> from
                                the <b>Network Overview</b> page.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>InternalNetId</b></p>
                        </entry>
                        <entry>
                            <p>The <b>ID</b> from
                                the <b>Network Overview</b> page.
                                <!-- this and the similar entry above need attention. We need two network IDs (or are the Names enough?) when we collect the parameters. --></p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>MinClusterSize</b></p>
                        </entry>
                        <entry>
                            <p>The minimum number of VMs to launch. The stack cannot
                                autoscale below this value.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>MaxClusterSize</b></p>
                        </entry>
                        <entry>
                            <p>The maximum number of VMs that can be launched.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>CustomMeterName</b></p>
                        </entry>
                        <entry>
                            <p>The name of a custom Ceilometer metric to store.<!-- For
                                information about custom metrics, see <xref href="jow1404916152577.xml"/>.--></p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>CustomMeterUnit</b></p>
                        </entry>
                        <entry>
                            <p>The unit of measurement to display for the custom
                                metric; for example, 'Percent'.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>MetricHighWaterMark</b></p>
                        </entry>
                        <entry>
                            <p>The value that triggers autoscaling to add
                                resources.</p>
                        </entry>
                    </row>
                    <row>
                        <entry>
                            <p><b>MetricLowWaterMark</b></p>
                        </entry>
                        <entry>
                            <p>The value that triggers autoscaling to remove
                                resources.</p>
                        </entry>
                    </row>
                </tbody></tgroup></table>
                </li>
        </ol>
    </body>
</topic>