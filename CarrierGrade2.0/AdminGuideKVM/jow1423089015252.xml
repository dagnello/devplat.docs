<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd" >
<topic domains="(topic task topic)                            (topic hi-d)                            (topic pr-d)                            (topic sw-d)                            (topic ui-d)                            (topic wr-sw-d)                            (topic xml-d)   " id="jow1423089015252">
<!-- Modification History
        
-->
    <title>Allocating Host Memory Using the CLI</title>
    <shortdesc>You can edit the platform and huge page memory allocations for a NUMA
        node from the CLI.</shortdesc>
    <prolog><author/>
        
    </prolog>
    <body>
        <ol>
             
                <li>Lock the affected host.
                
                    <codeblock>(keystone_admin)$ system host-lock hostname</codeblock>
                
                </li>
             
                <li>Use the following command to set the memory allocations.
                
                    <codeblock>(keystone_admin)$ system host-memory-modify hostname processor [-m reserved] [-2M 2Mpages] [-1G 1Gpages]</codeblock>
                    <p>where</p>
                    <parml>
                        <plentry>
                            <pt>hostname</pt>
                            <pd>
                                <p>is the hostname or id of the compute node</p>
                            </pd>
                        </plentry>
                        <plentry>
                            <pt>processor</pt>
                            <pd>
                                <p>is the NUMA node of the compute node (0 or 1)</p>
                            </pd>
                        </plentry>
                        <plentry>
                            <pt>reserved</pt>
                            <pd>
                                <p>(if the optional <option>-m</option> argument is included) the amount of memory
                                    reserved for platform use, in MiB.</p>
                            </pd>
                        </plentry>
                        <plentry>
                            <pt>2Mpages</pt>
                            <pd>
                                <p>(if the optional <option>-2M</option> argument is included) the number of 2MiB huge
                                    pages to make available.</p>
                            </pd>
                        </plentry>
                        <plentry>
                            <pt>1Gpages</pt>
                            <pd>
                                <p>(if the optional <option>-1G</option> argument is included) number of 1GiB huge
                                    pages to make available</p>
                            </pd>
                        </plentry>
                    </parml>
                
                
                    <p>For example, to allocate four 2 MiB huge pages for use by VMs
                        on NUMA node 1 of compute node <codeph>compute-0</codeph> :</p>
                    <codeblock>(keystone_admin)$ system host-memory-modify compute-0 1 -2M 4</codeblock>
                
                </li>
             
                <li>Unlock the host.
                
                    <codeblock>(keystone_admin)$ system host-unlock hostname</codeblock>
                
                </li>
             
                <li>Wait for the host to be reported as <codeph>available</codeph>. 
                
                    <codeblock>(keystone_admin)$ system host-list hostname +----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabledd    | available      |
+----+--------------+-------------+----------------+-------------+--------------+</codeblock>
                
                </li>
        </ol>
    </body>
</topic>